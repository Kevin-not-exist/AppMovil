<!DOCTYPE html>

<head lang="es">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>App Movil</title>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css"> -->
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
    <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
    <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css" integrity="sha512-xwE/Az9zrjBIphAcBb3F6JVqxf46+CDLwfLMHloNu6KEQCAWi6HcDUbeOfBIptF7tcCzusKFjFw2yuvEpDL9wQ==" crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js" integrity="sha512-gZwIG9x3wUXg2hdXF6+rVkLF/0Vi9U8D2Ntg4Ga5I5BZpVkVxlJWbSQtXPSiUTtC0TjtGOmxa1AJPuV0CPthew==" crossorigin=""></script>
    <script src="js/functions.js"></script>
</head>

<body>
    <!--aca-->
    <template id="t_historial_consultas">
        <ons-page id="p_historial_consultas">
            <script>

                $(document).on("click", "#btn_h_c_buscar", function(){
                    let usuario = sessionStorage.getItem("usuario");
                    usuario = JSON.parse(usuario);
                    let fecha= $("#input_h_c_fecha").val();
                    const url= `https://ort-api.herokuapp.com/reservas/?fecha=${fecha}`;
                    
                    $.ajax({
                        url:url,
                        type:"GET",
                        dataType:"json",
                        success:function(lista){
                            $("#lista_consultas_fecha").empty();
                            let item="";
                            let usu="La consulta no tiene un usuario asignado";
                            let lista_filtrada=new Array();

                            if(lista.reservas && lista.reservas!=null && lista.reservas.length>0){

                                $.each(lista.reservas, function(i, consulta){
                                    // if(consulta._id == usuario._id){ en caso de que la reserva deba ser filtrada por medico
                                        lista_filtrada.push(consulta);
                                    //}
                                })

                                if(lista_filtrada && lista_filtrada!=null && lista_filtrada.length>0){
                                    $.each(lista_filtrada, function(i, consulta_f){

                                        if(consulta_f.usuario && consulta_f.usuario!=null){
                                            usu=consulta_f.usuario;

                                            item=`
                                            <ons-list-header>${consulta_f.fechaString}</ons-list-header>
                                            <ons-list-item  modifier="chevron" class="usuario_reserva_fecha" data-nota="${consulta_f.notas}" tappable tap-background-color="#3ED47A"">
                                            <div class="left">
                                                <img class="list-item__thumbnail" src="http://images.marcelocaiafa.com/imagenes/usuarios/${usu._id}.png">
                                            </div>
                                            <div class="center">
                                                <span class="list-item__title">${usu.nombre}</span><span class="list-item__subtitle">${usu.apellido}</span>
                                            </div>
                                            </ons-list-item>
                                            `
                                            $("#lista_consultas_fecha").append(item);
                                        }
                                        else{
                                            item=`
                                            <ons-list-header>${consulta_f.fechaString}</ons-list-header>
                                            <ons-list-item >
                                                <div class="center">
                                                    <span class="list-item__title">${usu}</span>
                                                </div>
                                            </ons-list-item>
                                            `
                                            $("#lista_consultas_fecha").append(item);
                                        }
                                    })
                                }else{
                                    $("#lista_consultas_fecha").append(`<ons-list-header>${fecha}</ons-list-header><ons-list-item><h3>No tiene reservas para esta fecha</h3></ons-list-item>`);
                                }

                            }else{
                                $("#lista_consultas_fecha").append(`<ons-list-header>${fecha}</ons-list-header><ons-list-item><h3>No tiene reservas para esta fecha</h3></ons-list-item>`);
                            }

                        },
                        error(xml, err, status){
                            ons.notification.toast(xml_request.responseJSON.descripcion, {
                            "timeout": 3000
                            })
                        }
                    })
                })


                    $(document).on("click", ".usuario_reserva_fecha", function(){
                        let nota = $(this).data("nota");
                        console.log(nota);
                        if(nota==null || nota=="" || nota=="undefined"){
                            nota = "Esta consulta no contiene notas";
                            console.log("eeeeeee");
                        }

                        var notify = function() {
                            ons.notification.alert(nota,{title:"Notas:"});
                        };

                        notify();
                    })
                    
            </script>
            <section>
                <div>
                    <label for="input_h_c_fecha">Seleccione la fecha: </label>
                    <input type="date" id="input_h_c_fecha">
                    <ons-button id="btn_h_c_buscar">Buscar</ons-button>
                </div>
                <div>
                    <ons-list id="lista_consultas_fecha"></ons-list>
                </div>
            </section>
            
        </ons-page>
    </template>
    <!--hasta ACA-->
    <template id="t_buscar_usuario">
        <ons-page id="p_buscar_usuario">
            <script>
                ons.getScriptPage().onShow = function(){
                    $(document).on("input", "#nombre_apellido" , function(){

                        const busqueda = $(this).val();
                        if(busqueda.length > 3 && busqueda.includes(" ")){

                            try{
                                let aux= /[0-9]/g
                                if(aux.test(busqueda)){
                                    throw "No se deben ingresar numeros"           
                                }
                                let pos_espacio = busqueda.indexOf(" ");
                                let nombre = busqueda.substring(0, pos_espacio);
                                let apellido= busqueda.substring(pos_espacio+1 , busqueda.length)

                                const url= `https://ort-api.herokuapp.com/usuarios/?nombre=${nombre}&apellido=${apellido}`
                                $.ajax({
                                    url:url,
                                    data:"GET",
                                    dataType:"json",
                                    success:function(usuarios){
                                        $("#lista_buscar_usuario").empty();
                                        let item=""
                                        $.each(usuarios, function(i, usuario){

                                            item = `<ons-list-item modifier = "chevron longdivider" class="usuario" data-id = '${usuario._id}'  tappable tap-background-color="#3ED47A">
                                                        <div class="left">
                                                            <img class="list-item__thumbnail" src="http://images.marcelocaiafa.com/imagenes/usuarios/${usuario._id}.png">
                                                        </div>
                                                        <div class="center">
                                                            <p><span class="list-item__title">${usuario.nombre}</span><span class="list-item__subtitle">${usuario.apellido}</span></p>
                                                            <p><span class="list-item__title">Puntuacion: ${usuario.documento}</span></p>
                                                        </div>
                                                    </ons-list-item>`,

                                            $("#lista_buscar_usuario").append(item);                                                 
                                        })
                                    },
                                    error(xml, err, status){
                                        ons.notification.toast(xml_request.responseJSON.descripcion, {
                                        "timeout": 3000
                                    });
                                    }
                                })

                            }catch(e){
                                ons.notification.toast(e, {"timeout":3000})
                            }
                        }
                        
                        
                    })
                    $(document).on("click", ".usuario", function(){
                        const id = $(this).data("id");
                        console.log(id);
                        fn.load("t_consultas_usuario", "p_consultas_usuario", {data:{ //aca
                            id:id
                        }})
                    })
                }
                
            </script>
            <section>
                <p style="text-align: center; margin-top: 10px;"><ons-search-input id="nombre_apellido"placeholder="Nombre y apellido"></ons-search-input></p>

                <ons-list id="lista_buscar_usuario"></ons-list>
            </section>

        </ons-page>
    </template>
<!--desde acfa-->
    <template id="t_consultas_usuario">
        <ons-page id="p_consultas_usuario">
            <script>
                ons.getScriptPage().onInit=function(){
                    const usuario= this.data.id;
                    const url = `https://ort-api.herokuapp.com/usuarios/${usuario}/consultas`
                    $.ajax({
                        url:url,
                        type:"GET",
                        dataType: "json",
                        success:function(consultas){
                            let item="";
                            if(!consulta.notas ||consultas == null || consultas.length<0){
                                $("#lista_consultas_usuario").append(`<ons-list-header>El usuario no tiene consultas registradas</ons-list-header>`)
                                    
                                }else{
                                    $.each(consultas, function(i, consulta){
                                        {
                                            if(!consulta.notas || consulta.notas == null || consulta.notas==""){
                                                consulta.notas= "No se agregaron notas"
                                            }
                                            item=`
                                            <ons-list-header>${consulta.fechaString}</ons-list-header>
                                            <ons-list-item tappable>
                                                <p>Notas: ${consulta.notas}</p>
                                            </ons-list-item>`
                                        }
                                        $("#lista_consultas_usuario").append(item);
                                    })
                                }
                        },
                        error(xml, err, status){
                            ons.notification.toast(xml_request.responseJSON.descripcion,{
                                "timeout":3000
                            });
                        }
                    })
                }
            </script>
 
            <ons-list id="lista_consultas_usuario"></ons-list>
              
        </ons-page>
    </template>
    <!-- hasta aca -->

    <template id="t_info_especialista">
        <ons-page id="p_info_especialista">
            <script>

                ons.getScriptPage().onShow = function(){
                    const especialista = this.data.id;
                    const url= `https://ort-api.herokuapp.com/medicos/${especialista}`;

                    $(document).on("click", "#btn_reserva_medica", function(){
                        
                        var dialog = document.getElementById('my-alert-dialog');

                        if (dialog) {
                            dialog.show();
                        } else {
                            ons.createElement('alert-dialog-reserva', { append: true,data:{
                            id:especialista
                        }})
                            .then(function(dialog) {
                                dialog.show();
                            });
                        }                      
                    });

                    $.ajax({
                        url:url,
                        data: "GET",
                        dataType: "json",
                        success:function(informacion){
                            //Kevin
                            let itemDos = "";
                                itemDos = `
                                <ons-card>
                                    <p><input type="text" id="id_medico_reserva" value="${informacion._id}"></p>
                                </ons-card>`
                                $("#info_especialista").html(itemDos);

                            //Yamila
                            let item= "";
                            $("#img_info_esp").attr("src", `https://ort-api.herokuapp.com/imagenes/medicos/${informacion._id}.png`);
                            $("#nombre_info_esp").html(`${informacion.nombre} ${informacion.apellido}`);
                            $.each(informacion.especialidades, function(i, especialidad){

                                $("#especialidades_info_esp").append(" " + especialidad.descripcion);
                            })
                            $("#puntuacion_info_esp").html("Puntuacion: "+ informacion.puntuacion);
                            $("#promedio_info_esp").html("Promedio: "+informacion.promedio);
                            $.each(informacion.comentarios, function(i, comentario){
                                item=`
                                    <ons-list-item>
                                        <span>Usuario: ${comentario.usuario.nombre} ${comentario.usuario.apellido}</span>
                                        <span>Comentario: ${comentario.comentario}</span>
                                        <span>Puntuacion: ${comentario.puntuacion}</span>
                                    </ons-list-item>
                                    `
                                $("#lista_comentarios").append(item);
                            })
                            
                            
                            console.log('a');
                            let myMap = document.getElementById("mapid");
                            if(myMap == null ){
                                let contenedor = document.getElementById("map_container");
                                contenedor.innerHTML = "<div id='mapid'></div>";
                                myMap = document.getElementById("mapid");

                                console.log('b');
                                myMap = L.map('mapid').setView([Number(informacion.centroMedico.lat), Number(informacion.centroMedico.lng)], 13);

                                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                                    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
                                }).addTo(myMap);
                                //.openPopup();
                                L.marker([Number(informacion.centroMedico.lat), Number(informacion.centroMedico.lng)]).addTo(myMap)
                                    .bindPopup(`${informacion.centroMedico.descripcion}`);
                            }
                            
                        },
                        error:function (xml_request, err, status) {
                            ons.notification.toast(xml_request.responseJSON.descripcion, {
                                "timeout": 3000
                            });
                        }

                    })
                }
            </script>
                 <!--Boton para retroceder-->
                 <ons-toolbar>
                <div class="right">
                    <ons-toolbar-button><ons-back-button></ons-back-button></ons-toolbar-button>
                </div>
                <div class="center">Médico</div>
                </ons-toolbar>
                <!--Boron reserva médica-->
                <ons-fab position="bottom right">
                    <ons-icon icon="md-plus" id="btn_reserva_medica"></ons-icon>
                </ons-fab>
            <section>
                <ons-card>
                    <img src="" id="img_info_esp" alt="Onsen UI" style="width: 100%">
                    <div class="title" id="nombre_info_esp"></div>
                    <div id="especialidades_info_esp">Especialidades: </div>
                    <div id="puntuacion_info_esp"></div>
                    <div id="promedio_info_esp"></div>
                    <!--Kevin-->
                    <p><ons-button id="btn_agregar_medico_fav">Agregar a favoritos</ons-button></p>
                    <p><ons-button id="btn_ventana_comentario">Comentario</ons-button></p>
                    <ons-list id="lista_comentarios">
                    <!---->
                    <ons-list id="lista_comentarios">
                        <ons-list-header><h2>Comentarios:</h2></ons-list-header>
                    </ons-list>
                </ons-card>
                <div id="map_container"></div>
                <ons-list id="info_especialista"></ons-list>
            </section>
        </ons-page>
    </template>

    <!--Ventana Reserva Médica-->
    <template id="alert-dialog-reserva">
        <ons-alert-dialog id="my-alert-dialog" modifier="rowfooter">
            <div class="alert-dialog-title">Reserva Médica</div>
          <div class="alert-dialog-content">
            <label for="fecha_reserva_medica">Fecha</label>
            <p><input type="date" id="fecha_reserva_medica"></p>
            
            <label for="hora_reserva_medica">Hora</label>
            <p><input type="time" id="hora_reserva_medica"></p>
          </div>
          <div class="alert-dialog-footer">
            <ons-alert-dialog-button id="btn_salir_reserva_medica">Cancel</ons-alert-dialog-button>
            <ons-alert-dialog-button id="btn_enviar_reserva_medica">OK</ons-alert-dialog-button>
          </div>
        </ons-alert-dialog>
    </template>

    <!--hasta aca-->

    <template id="t_especialistas">
        <ons-page id="p_especialistas">
            <script>
                ons.getScriptPage().onInit = function(){

                    $(document).on("click", ".especialista", function(){
                        const id = $(this).data("id");
                        fn.load("t_info_especialista", "p_info_especialista", {data:{
                            id:id
                        }})
                    })
                }
                ons.getScriptPage().onShow=function(){

                    const especialidad = this.data.id;
                    const url= `https://ort-api.herokuapp.com/medicos/especialidad/?buscar=${especialidad}`
                    $.ajax({
                        url:url,
                        type: "GET",
                        dataType: "json",
                        success:function(especialistas){
                            let item="";
                            $.each(especialistas, function(i, especialista){
        
                                item = `<ons-list-item modifier = "chevron longdivider" class="especialista" data-id = '${especialista._id}'  tappable tap-background-color="#3ED47A">
                                        <div class="left">
                                            <img class="list-item__thumbnail" src="https://ort-api.herokuapp.com/imagenes/medicos/${especialista._id}.png">
                                        </div>
                                        <div class="center">
                                            <span class="list-item__title">${especialista.nombre}</span><span class="list-item__subtitle">${especialista.apellido}</span>
                                        </div>
                                        <div class="right">
                                            <span class="list-item__title">Puntuacion: ${especialista.puntuacion}</span>
                                        </div>
                                        </ons-list-item>`,
                                $("#listado_especialistas").append(item);
                            });
                        },
                        error: function (xml_request, err, status) {
                            console.log(xml_request);
                            ons.notification.toast(xml_request.responseJSON.descripcion, {
                                "timeout": 3000
                            });
                        }
                    })
                }

            </script>
             <ons-toolbar>
                <div class="right">
                    <ons-toolbar-button><ons-back-button></ons-back-button></ons-toolbar-button>
                </div>
                <div class="center">Listado de especialistas</div>
            </ons-toolbar>
            <section>
                <ons-list id="listado_especialistas">
                </ons-list>
            </section>
        </ons-page>
    </template>

    <template id="t_especialidades_disponibles">
        <ons-page id="p_especialidades_disponibles">
            <script>
                ons.getScriptPage().onShow = function(){

                    $(document).on("click", ".l_esp_disponibles", function(){
                        const id = $(this).data("id");
                        fn.load("t_especialistas", "p_especialistas", {data:{
                            id:id
                        }})
                    })
                }
            </script>
            <ons-toolbar>
                <div class="left">
                    <ons-toolbar-button icon="fa-bars" onclick="fn.open()"></ons-toolbar-button>
                </div>
                <div class="center">Especialidades</div>
            </ons-toolbar>
            <section>
                <ons-list>
                    <ons-list-item class="l_esp_disponibles" modifier="chevron" data-id = "Cardiolog&iacute;a" tappable tap-background-color="#3ED47A"> <!--se agrego el chevron-->
                        <div class="center">
                            <span>Cardiolog&iacute;a</span>
                        </div>
                    </ons-list-item>
                    <ons-list-item class="l_esp_disponibles" modifier="chevron" data-id = "Oftalmolog&iacute;a" tappable tap-background-color="#3ED47A">
                        <div class="center">
                            <span>Oftalmolog&iacute;a</span>
                        </div>
                    </ons-list-item>
                    <ons-list-item class="l_esp_disponibles" modifier="chevron" data-id = "Neumolog&iacute;a" tappable tap-background-color="#3ED47A">
                        <div class="center">
                            <span>Neumolog&iacute;a</span>
                        </div>
                    </ons-list-item>
                    <ons-list-item class="l_esp_disponibles" modifier="chevron" data-id = "Reumatolog&iacute;a" tappable tap-background-color="#3ED47A">
                        <div class="center">
                            <span>Reumatolog&iacute;a</span>
                        </div>
                    </ons-list-item>
                    <ons-list-item class="l_esp_disponibles" modifier="chevron" data-id = "Psiquiatr&iacute;a" tappable tap-background-color="#3ED47A">
                        <div class="center">
                            <span>Psiquiatr&iacute;a</span>
                        </div>
                    </ons-list-item>
                    <ons-list-item class="l_esp_disponibles" modifier="chevron" data-id = "Geriatr&iacute;a" tappable tap-background-color="#3ED47A">
                        <div class="center">
                            <span>Geriatr&iacute;a</span>
                        </div>
                    </ons-list-item>
                    <ons-list-item class="l_esp_disponibles" modifier="chevron" data-id = "Neurocirug&iacute;a" tappable tap-background-color="#3ED47A">
                        <div class="center">
                            <span>Neurocirug&iacute;a</span>
                        </div>
                    </ons-list-item>
                    <ons-list-item class="l_esp_disponibles" modifier="chevron" data-id = "Oncolog&iacute;a" tappable tap-background-color="#3ED47A">
                        <div class="center">
                            <span>Oncolog&iacute;a</span>
                        </div>
                    </ons-list-item>
                    <ons-list-item class="l_esp_disponibles" modifier="chevron" data-id = "Traumatolog&iacute;a" tappable tap-background-color="#3ED47A">
                        <div class="center">
                            <span>Traumatolog&iacute;a</span>
                        </div>
                    </ons-list-item>
                </ons-list>
            </section>
        </ons-page>
    </template>

    <ons-modal direction="up" id="cargando">
        <div style="text-align: center">
            <p>
                <ons-icon icon="md-spinner" size="28px" spin></ons-icon> <span id="txt_cargando"></span>
            </p>
        </div>
    </ons-modal>
    
    <ons-splitter>
        <ons-splitter-side id="menu" side="left" width="220px" collapse swipeable>
            <ons-page>
                <ons-list>
                    <ons-list-item onclick="fn.load('t_especialidades_disponibles','p_especialidades_disponibles')" modifier="chevron" tappabletap-background-color="#3ED47A">
                        <ons-icon icon="md-face" size="20px" style="color:#3ED47A"></ons-icon>&nbsp;Médicos
                    </ons-list-item>
                    <ons-list-item onclick="fn.load('t_medico_favorito','p_medico_favorito')" modifier="chevron" tappabletap-background-color="#3ED47A">
                        <ons-icon icon="fa-heart" size="20px" style="color:#d47a3e"></ons-icon>&nbsp;Médico Favorito
                    </ons-list-item>
                    <ons-list-item id="btn_logout" modifier="chevron" tappable tap-background-color="#3ED47A">
                        <ons-icon icon="fa-sign-out-alt" size="20px"></ons-icon>&nbsp;Cerrar Sesi&oacute;n
                    </ons-list-item>
                    <ons-list-item tappable>
                        <ons-icon icon="fa-times-circle" size="15px"></ons-icon>&nbsp;Salir
                    </ons-list-item>
                </ons-list>
            </ons-page>
        </ons-splitter-side>
        <ons-splitter-content id="content">
            <ons-navigator id="nav" page="t_login"></ons-navigator>
        </ons-splitter-content>
    </ons-splitter>

    <template id="t_login">
        <ons-page id="p_login">
            <script>
                ons.getScriptPage().onShow = function () {
                    if (localStorage.getItem("email")) {
                        const recordar = document.getElementById('swt_recordar_password');

                        //si hay usuario grabado en localStorage, dejo marcado switch y hago login.
                        recordar.setAttribute('checked', 'true');
                        const email = localStorage.getItem("email");
                        const pwd = localStorage.getItem("password");
                        login(email, pwd);
                    }
                }

                ons.getScriptPage().onInit = function () {

                    $(document).on("click", "#btn_login", function () {
                        try {
                            const email = $("#login_usuario").val();
                            const pwd = $("#inp_login_pwd").val();
                            const tipo = $("#tipo_login").val();
                            if (!email) {
                                throw "Ingrese email para continuar";
                            }
                            if (!pwd) {
                                throw "Ingrese contraseña para continuar";
                            }
                            if (!tipo) {
                                throw "Ingrese tipo para continuar";
                            }
                            login(email, pwd, tipo);
                        }
                        catch (e) {
                            ons.notification.toast(e, { "timeout": 3000 });
                        }
                    });

                    $(document).on("click", "#btn_login_registro", function () {
                        //Redirecciono a registro
                        fn.load("t_registro", "p_registro");
                    });

                    $(document).on("click", "#mostrar_pwd", function () {
                        //si el elemento tiene como atributo icon fa-eye lo cambio a fa-eye-slash y viceversa. 
                        if ($(this).attr("icon") == 'fa-eye') {
                            $(this).attr("icon", "fa-eye-slash");
                            //cambio tipo de input a password.
                            $("#inp_login_pwd").attr("type", "password");
                        }
                        else {
                            //ver password
                            $(this).attr("icon", "fa-eye");
                            //cambio tipo de input a input.
                            $("#inp_login_pwd").attr("type", "input");
                        }
                    });
                    $(document).on("click", "#swt_recordar_password", function () {
                        const recordar = document.getElementById('swt_recordar_password');
                        if (recordar.checked) {
                            const email = $("#login_usuario").val();
                            const pwd = $("#inp_login_pwd").val();
                            //grabo el localStorage.
                            localStorage.setItem("email", email);
                            localStorage.setItem("password", pwd);
                        }
                        else {
                            //remuevo de localStorage.
                            localStorage.removeItem("email");
                            localStorage.removeItem("password");
                        }
                    });
                }
            </script>
            <section>
                <h1>Login de Usuario</h1>
                <label for="login_usuario"></label>
                <p><input class="text-input text-input--material" type="text" id="login_usuario" placeholder="Ingrese usuario"></p>

                <label for="inp_login_pwd"></label>
                <p><input class="text-input text-input--material" type="password" id="inp_login_pwd"placeholder="Ingrese contrase&ntilde;a">
                    <ons-icon icon="fa-eye-slash" id="mostrar_pwd"></ons-icon>
                <p>
                    <ons-select id="tipo_login">
                        <option value="">Seleccione una opción</option>
                        <option value="U">Usuario</option>
                        <option value="M">Médico</option>
                    </ons-select>
                </p>
                <p>
                    <ons-button id="btn_login">Login</ons-button>
                    <ons-button modifier="outline" id="btn_login_registro">Registro</ons-button>
                </p>
                <ons-switch modifier="material" id="swt_recordar_password" input-id="swt_recordar_password2">
                </ons-switch>
                <!-- Si hace click sobre el texto Recordar contraseña, activar switch. -->
                <label for="swt_recordar_password2">Recordar contrase&ntilde;a</label>
            </section>
        </ons-page>
    </template>


    <template id="t_registro">
        <ons-page id="p_registro">
            <section>
                <h1>Registro de usuario</h1>
                <label for="nombre">Nombre</label>
                <p><input type="text" class="text-input text-input--material" id="nombre" placeholder="Ingrese nombre">
                </p>
                <label for="apellido">Apellido</label>
                <p><input type="text" class="text-input text-input--material" id="apellido" placeholder="Ingrese apellido"></p>
                <label for="email">Email</label>
                <p><input type="text" class="text-input text-input--material" id="email" placeholder="Ingrese email">
                </p>
                <label for="pwd">Contrase&ntilde;a</label>
                <p><input type="password" class="text-input text-input--material" id="pwd" placeholder="Ingrese contraseña"></p>
                <label for="repwd">Re contrase&ntilde;a</label>
                <p><input type="password" class="text-input text-input--material" id="repwd" placeholder="Repita la contraseña"></p>
                <label for="telefono">Teléfono</label>
                <p><input type="text" class="text-input text-input--material" id="telefono" placeholder="Teléfono"></p>
                <label for="documento">Documento</label>
                <p><input type="text" class="text-input text-input--material" id="documento" placeholder="De 7 a 8 digitos..."></p>
                <p>
                    <ons-select id="genero">
                        <option value="">Seleccione una opci&oacute;n</option>
                        <option value="M">Masc</option>
                        <option value="F">Fem</option>
                    </ons-select>
                </p>
                <p>
                    <ons-button id="btn_registro">Registrarse</ons-button>
                </p>
            </section>
        </ons-page>
    </template>

    <template id="t_medico_favorito">
        <ons-page id="p_medico_favorito">
            <script>
                ons.getScriptPage().onShow = function () {
                    let lista_medicos;
                    lista_medicos = localStorage.getItem("lista_medicos_fav");
                    lista_medicos = JSON.parse(lista_medicos);
                    let url= "";
                    $("#listado_medicos_fav").empty();
                    if(lista_medicos == null){
                        let item="";
                        item= `<ons-list-item tappable tap-background-color="#3ED474">
                                <h3>Aún no tienes medicos favoritos</h3>
                                </ons-list-item>`
                        $("#listado_medicos_fav").append(item);
                    }else{
                        for(let i=0; i<lista_medicos.length; i++){
                            url = `https://ort-api.herokuapp.com/medicos/${lista_medicos[i]}`;
                        
                            $.ajax({
                            url:url,
                            data: "GET",
                            dataType: "json",
                            success:function(medicos){
                                let item="";
                                item = `<ons-list-item tappable tap-background-color="#3ED47A">
                                            <div class="left">
                                                <img class="list-item__thumbnail" src="https://ort-api.herokuapp.com/imagenes/medicos/${medicos._id}.png">
                                            </div>
                                            <div class="center">
                                                <span class="list-item__title">${medicos.nombre}</span><span class="list-item__subtitle">${medicos.apellido}</span>
                                            </div>
                                            </ons-list-item>`;
                                    $("#listado_medicos_fav").append(item);
                            },
                            error: function (xml_request, err, status) {
                                ons.notification.toast(xml_request.responseJSON.descripcion, {"timeout": 3000});
                            }
                        })
                        }
                    }
                }
            </script>
            <ons-toolbar>
                <div class="left">
                    <ons-toolbar-button icon="fa-bars" onclick="fn.open()"></ons-toolbar-button>
                </div>
                <div class="center">Médico Favorito</div>
            </ons-toolbar>
            <section>
                <ons-list id="listado_medicos_fav"></ons-list>
            </section>
        </ons-page>
    </template>

    <!--Puntuación de usuarios-->
    <template id="t_punt_usuario">
        <ons-page id="p_punt_usuario">
            <script>

            </script>
             <ons-toolbar>
                <div class="right">
                    <ons-toolbar-button><ons-back-button></ons-back-button></ons-toolbar-button>
                </div>
                <div class="center">Comentario</div>
            </ons-toolbar>
            <section>
                <label for="txt_comentario_medico">Comentario:</label>
                <div><input type="text" id="txt_comentario_medico"></div>
                <label for="selec_puntuacion_medico">Puntuación</label>
                <p>
                    <ons-select id="selec_puntuacion_medico">
                        <option value="" selected disabled>Seleccione una opción</option>
                        <option value="1">1</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                    </ons-select>
                </p>
                <p>
                    <ons-button id="btn_enviar_comentario">Enviar</ons-button>
                </p>
            </section>
        </ons-page>
    </template>
</body>
</html>