<!DOCTYPE html>

<html>
    <head>
        <title>Salud médica</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/css/bootstrap.min.css" integrity="sha384-VCmXjywReHh4PwowAiWNagnWcLhlEJLA5buUprzK8rxFgeH0kww/aWY76TfkUoSX" crossorigin="anonymous">
        <link href="css/estilos.css" rel="stylesheet" type="text/css"/>
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
        <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
        <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js" integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.1/js/bootstrap.min.js" integrity="sha384-XEerZL0cuoUbHE4nZReLT7nx9gQrQreJekYhJD9WNWhH8nEW+0c5qq7aIo2Wl30J" crossorigin="anonymous"></script>
        <script src="js/codigo.js"></script>
        <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsenui.css">
        <link rel="stylesheet" href="https://unpkg.com/onsenui/css/onsen-css-components.min.css">
        <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
    </head>
    <body>
        <ons-navigator swipeable id="nav" page="t_login"></ons-navigator>

        <template id="t_listado"> 
            <ons-page id="p_listado">
                <script>
                    ons.getScriptPage().getInit = function(){
                        
                    }

                    ons.getScriptPage().onInit = function(){
                        //se ejecuta cuando se crea la pagina [única vez]
                    }

                    ons.getScriptPage().onShow = function(){
                        //cada vez que entro a esta pagina
                        let usuario = sessionStorage.getItem("usuario");
                        usuario = JSON.parse(usuario);

                        $("#txt_saludo").html(`Hola <strong>${usuario.nombre}</strong>`);
                        const url = "http://api.marcelocaiafa.com/local";
                        $.ajax({
                            url = url,
                            type: "GET",
                            dataType: "json",
                            success: function(locales){
                                $.each(locales.descripcion, function(key, local){
                                    let item = "";
                                    item = `
                                        <ons-list-item>
                                            <div class="left">
                                                <img class="list__thumbnail" src="http://images.marcelocaiafa.com/local/${local.imagen}">
                                            </div>
                                            <div class="center">
                                                <span class="list-item-title">${local.nombre}</span><span class="list-item__subtitle">${local.telefono}</span>
                                            </div>
                                        </ons-list-item>`;
                                        $("#l_list").append(item);
                                });
                            },
                        error: function(xml_request, err, status){
                            ons.notification.toast(xml_request.responseJSON.descripcion, {"timeout": 3000})
                        }
                        })
                    }
                </script>

                <section>
                    <h1>Listado de locales</h1>
                    <p id="txt_saludo"></p>
                    <ons-list>
                        <ons-list-header id="l_list">Lista de locales</ons-list-header>
                    </ons-list>
                </section>
            </ons-page>
        </template>

        <template id="t_login">
            <ons-page id="p_login">
                <section class="row text-center mx-auto container">
                    <h1 class="col-12">Login</h1>
                    <input type="email" id="txt_email_login" required placeholder="E-mail" class="col-8 mx-auto form-control my-1">
                    <input type="password" id="txt_pass_login" required placeholder="Contraseña" class="col-8 mx-auto form-control my-2">
                    <label for="select_personal" class="col-5">Personal</label>
                    <select id="select_personal" class="col-5">
                        <option value="">Seleccione una opción</option>
                        <option value="U">Usuario</option>
                        <option value="D">Doctor</option>
                    </select>
                    <button type="button" id="btn_no_registrado" class="col-4 offset-4 my-3">¿No estas registrado?</button>
                    <button type="button" id="btn_login" class="col-8 mx-auto btn btn-success mt-2">LogIn</button>
                </section>
            </ons-page>
        </template>

        <template id="t_registro">
            <ons-page id="p_registro">
                <section class="row text-center mx-auto container my-5 py-5">
                    <h1 class="col-12">Registro de usuario</h1>

                    <input type="text" id="txt_nombre" required placeholder="Nombre" class="col-8 mx-auto form-control my-2">
                    <input type="text" id="txt_apellido" required placeholder="Apellido" class="col-8 mx-auto form-control my-2">
                    <input type="text" id="txt_documento" required placeholder="Documento" class="col-8 mx-auto form-control my-2">
                    <input type="password" id="txt_pass" required placeholder="Contraseña" class="col-8 mx-auto form-control my-2">
                    <input type="email" id="txt_email" required placeholder="E-mail" class="col-8 mx-auto form-control my-2">
                    <input type="text" id="txt_telefono" required placeholder="Teléfono" class="col-8 mx-auto form-control my-2">
                    <input type="text" id="txt_direccion" required placeholder="Dirección" class="col-8 mx-auto form-control my-2">
                    <label for="select_genero" class="col-5 my-2">Genero</label>
                    <select id="select_genero" class="col-5">
                        <option value="">Seleccione una opción</option>
                        <option value="F">F</option>
                        <option value="M">M</option>
                    </select>
                    <button type="button" id="btn_registro" class="col-8 mx-auto btn btn-success mt-3">Registrar</button>
                </section>
            </ons-page>
        </template>

        <template id="t_info_medico">
            <ons-page id="p_info_medico">
                <section>
                    <h1>Información de profesionales médicos</h1>
                </section>
            </ons-page>
        </template>

        <template id="t_reserva_medica">
            <ons-page id="p_reserva_medica">
                <section class="row text-center mx-auto container my-5 py-5">
                    <h1 class="col-12">Reserva médica</h1>
                    <label for="fecha_reserva_medica" class="col-1">Fecha:</label>
                    <input type="date" id="fecha_reserva_medica" class="col-2">

                    <label for="hora_reserva_medica" class="col-1 offset-1">Hora:</label>
                    <input id="hora_reserva_medica" type="text" class="col-2">

                    <label for="medico_reserva_medica" class="col-1 offset-1">Médico:</label>
                    <select id="select_reserva_medica" class="col-2"></select>
                </section>
            </ons-page>
        </template>
    </body>
</html>